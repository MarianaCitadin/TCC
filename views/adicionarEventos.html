<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/paginas/adicionarEventos.css">
    <title>Eventos - Clicando na Terceira Idade</title>
    <script src="/js/paginas/adicionarEventos.js" defer></script>
</head>
<body>
    <header>
        <div class="logo">Clicando na Terceira Idade</div>
        <nav>
            <ul>
                <li><a href="index2">Início</a></li>
                <li><a href="cadastrarTurmas">Turmas</a></li>
                <li><a href="cadastroAtividades">Atividades</a></li>
                <li><a href="listagemUsuarios">Usuários</a></li>
                <li><a href="cadastrarFotos">Fotos</a></li>
                <li><a href="login">Sair</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h1>Adicionar Eventos</h1>
        <h2>Lista de Eventos</h2>
        <table>
            <thead>
                <tr>
                    <th>Título</th>
                    <th>Data/Hora</th>
                    <th>Local</th>
                    <th>Ações</th> <!-- Coluna para os botões de ação -->
                </tr>
            </thead>
            <tbody>
                <!-- Exemplo de linha com o botão de deletar -->
                <tr>
                    <td>Evento Exemplo</td>
                    <td>01/01/2025 10:00</td>
                    <td>Auditório</td>
                    <td><button class="delete-btn" data-event-id="1">Deletar</button></td> <!-- Botão de deletar -->
                </tr>
                <!-- Linhas dinâmicas de eventos serão inseridas aqui -->
            </tbody>
        </table>

        <button class="add-event" title="Adicionar novo evento">Adicionar Evento</button>

        <!-- Formulário de Adicionar Evento -->
        <form id="eventForm" action="/adicionarEvento" method="POST">
            <label for="title">Título:</label>
            <input type="text" id="title" name="NomeEvento" required>
            
            <label for="date">Data/Hora:</label>
            <input type="datetime-local" id="date" name="DataEvento" required>
            
            <label for="location">Local:</label>
            <input type="text" id="location" name="LocalEvento" required>
            
            <input type="hidden" id="projectId" name="ProjetoID" value="">
            
            <button type="submit">Salvar</button>
            <button type="button" id="cancelForm">Cancelar</button>
        </form>
        
    </main>

    <script>
        // Adicionando evento para o botão de deletar
        document.querySelectorAll('.delete-btn').forEach(button => {
            button.addEventListener('click', (event) => {
                const eventId = event.target.getAttribute('data-event-id');
                
                // Aqui você pode chamar uma função para excluir o evento, por exemplo, com AJAX ou fazer um redirecionamento para uma rota de exclusão
                if (confirm(`Tem certeza que deseja excluir o evento com ID ${eventId}?`)) {
                    // Exemplo de chamada para o backend para excluir o evento
                    fetch(`/deletarEvento/${eventId}`, { method: 'DELETE' })
                        .then(response => {
                            if (response.ok) {
                                alert('Evento deletado com sucesso!');
                                location.reload(); // Atualiza a página para refletir a exclusão
                            } else {
                                alert('Erro ao deletar o evento!');
                            }
                        })
                        .catch(error => {
                            console.error('Erro ao deletar evento:', error);
                            alert('Erro ao deletar o evento!');
                        });
                }
            });
        });
    </script>
</body>
</html>
